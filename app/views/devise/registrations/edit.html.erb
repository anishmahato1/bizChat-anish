<div class="box-container">
  <div class="form-container">
      
    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
    <h2 class="form-title">Settings</h2>

    <% if @user.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this chat from being saved:</h2>

      <ul>
        <% @user.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
          
      <div class="field">
      <%= image_tag(resource.avatar.variant(:thumb), alt: "User Avatar") if resource.avatar.attached? %>
      </div>
      <div class="field">
        <%= f.label :avatar%>
        <%= f.file_field :avatar %>
      </div>

      <div class="field">
        <span><%= f.label :name,"Change Name" ,class: "label-text label-box" %>
        <div class="input-field">
        <%= f.text_field :name, placeholder: "Enter New Name", pattern: "[a-zA-Z ]+", title: "Only allows letters and space", autofocus: true%>
        <%= render "devise/shared/error_messages", field: :name %>
        </div></span>
      </div>
     
      <div class="field">
        <%= f.label :password, "Change Password", class: "label-text label-box"  %>
        <span><div class="input-field">
          <%= f.password_field :password, placeholder: "Enter your password" , minlength: 6%>
        <%= render "devise/shared/error_messages" , field: :password %>
      </div></span>
    </div>

    <div class="field">
      <%= f.label :current_password, class: "label-text label-box" %> 
      <%= f.password_field :current_password, autocomplete: "current-password" %>
    </div>

      <%= f.submit "Done", class: "submit label-box" %>
    <% end %>
    <p class="bottom-bar">
      <%= button_to "Delete Account", registration_path(resource_name), data: { confirm: "Are you sure?", turbo_confirm: "Are you sure?" }, method: :delete,class: "text-red" %>

      <%= link_to "Logout", destroy_user_session_path  %>
      <%= link_to "Back", :back %>
    </p>
  </div>
 
</div>
